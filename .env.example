# Root environment reference (CONSOLIDATED)
# ---------------------------------------------------------
# This file is a consolidated reference for all env vars across the monorepo.
# IMPORTANT:
# - Runtime processes load app-local env files:
#   - apps/api/.env.local
#   - apps/worker/.env.local
#   - apps/web/.env.local
# - This root file is NOT guaranteed to be loaded by any runtime.
# Use it as documentation + a quick place to copy values from.

NODE_ENV=development
APP_ENV=local
LOG_LEVEL=debug

# ---------------------------------------------------------
# Shared database / queue (REMOTE Supabase ONLY)
# Use the Supabase Session Pooler connection string and require SSL.
# Example:
# postgresql://postgres.<project-ref>:<DB_PASSWORD>@aws-<n>-<region>.pooler.supabase.com:5432/postgres?sslmode=require
DATABASE_URL=
DIRECT_URL=
PG_BOSS_SCHEMA=pgboss

# ---------------------------------------------------------
# Supabase (CLI + optional runtime integrations)
SUPABASE_PROJECT_REF=cbcgrzvqidtrtrtnzlso

# Optional: for Supabase CLI automation (CI). Locally you can usually rely on `supabase login`.
SUPABASE_ACCESS_TOKEN=

# Optional: only required by some scripts; runtime typically uses DATABASE_URL instead.
SUPABASE_DB_PASSWORD=

# Publishable key (safe for browser use when/if you add Supabase client features).
SUPABASE_PUBLISHABLE_KEY=

# Service role key (NEVER commit; server-only; only set if a server process needs Supabase admin APIs).
SUPABASE_SERVICE_ROLE_KEY=

# ---------------------------------------------------------
# API (apps/api)
API_PORT=5050
CORS_ORIGIN=http://localhost:3000
# Required by current API env validator (legacy internal JWT fields)
JWT_ACCESS_SECRET=lead-flood-local-access-secret-please-change
JWT_REFRESH_SECRET=lead-flood-local-refresh-secret-please-change
SUPABASE_JWT_ISSUER=
SUPABASE_JWT_AUDIENCE=authenticated

# Used to protect /v1/admin/* endpoints (server-side). Set in apps/api/.env.local and apps/web/.env.local.
ADMIN_API_KEY=

# ---------------------------------------------------------
# Web (apps/web)
NEXT_PUBLIC_API_BASE_URL=http://localhost:5050
# Read-only dashboard mode (no API dependency for /discovery pages):
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# Optional compatibility alias.
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=

# Legacy server-only proxy settings (not required for /discovery read-only mode).
API_BASE_URL=http://localhost:5050

# ---------------------------------------------------------
# Discovery toggles
# Legacy adapter-based discovery.run pipeline (deprecated; keep disabled)
DISCOVERY_ENABLED=false

# Canonical discovery pipeline (SerpAPI search-task pipeline)
SERPAPI_DISCOVERY_ENABLED=true

# ---------------------------------------------------------
# SerpAPI discovery (canonical)
SERPAPI_API_KEY=

DISCOVERY_COUNTRIES=JO,SA,AE,EG
DISCOVERY_LANGUAGES=en,ar

# Conservative defaults for main-only dev (increase carefully)
DISCOVERY_MAX_PAGES_PER_QUERY=1

# allowed: daily|weekly
DISCOVERY_REFRESH_BUCKET=weekly

DISCOVERY_RPS=1
DISCOVERY_CONCURRENCY=1
DISCOVERY_ENABLE_CACHE=true

# maps-local city-wide default zoom (3-20). Lower = wider area.
DISCOVERY_MAPS_ZOOM=13

DISCOVERY_MAX_TASK_ATTEMPTS=3
DISCOVERY_BACKOFF_BASE_SECONDS=30

# Safety cap for bounded validation runs
DISCOVERY_RUN_MAX_TASKS=40

# DB-backed job request dispatcher (worker consumes public.job_requests)
JOB_REQUEST_POLL_MS=5000
JOB_REQUEST_MAX_PER_TICK=1
JOB_REQUEST_WORKER_ID=

# Seed controls
DISCOVERY_SEED_PROFILE=default
DISCOVERY_SEED_MAX_TASKS=40
DISCOVERY_SEED_MAX_PAGES=1
DISCOVERY_SEED_COUNTRIES=AE,SA,JO,EG
DISCOVERY_SEED_LANGUAGES=en,ar
DISCOVERY_SEED_TASK_TYPES=SERP_MAPS_LOCAL,SERP_GOOGLE_LOCAL

# Strongly recommended: isolate runs in the DB with a bucket suffix
DISCOVERY_SEED_BUCKET=zack-dev

# ---------------------------------------------------------
# Optional future discovery providers (NOT USED CURRENTLY)
# Keep disabled unless you implement and enable adapters.

BRAVE_SEARCH_ENABLED=false
BRAVE_SEARCH_API_KEY=
BRAVE_SEARCH_BASE_URL=https://api.search.brave.com/res/v1/web/search
BRAVE_SEARCH_RATE_LIMIT_MS=250

GOOGLE_PLACES_ENABLED=false
GOOGLE_PLACES_API_KEY=
GOOGLE_PLACES_BASE_URL=https://places.googleapis.com/v1/places:searchText
GOOGLE_PLACES_RATE_LIMIT_MS=250

LINKEDIN_SCRAPE_ENABLED=false
LINKEDIN_SCRAPE_ENDPOINT=
LINKEDIN_SCRAPE_API_KEY=

APOLLO_ENABLED=false
APOLLO_API_KEY=
APOLLO_BASE_URL=https://api.apollo.io
APOLLO_RATE_LIMIT_MS=250

# Google CSE / Custom Search is deprecated and not supported (intentionally omitted).

# ---------------------------------------------------------
# Enrichment (OFF by default)
ENRICHMENT_ENABLED=false
ENRICHMENT_DEFAULT_PROVIDER=HUNTER

HUNTER_ENABLED=false
HUNTER_API_KEY=
HUNTER_BASE_URL=https://api.hunter.io/v2
HUNTER_RATE_LIMIT_MS=250

CLEARBIT_ENABLED=false
CLEARBIT_API_KEY=
CLEARBIT_PERSON_BASE_URL=https://person.clearbit.com/v2/people/find
CLEARBIT_COMPANY_BASE_URL=https://company.clearbit.com/v2/companies/find

PDL_ENABLED=false
PDL_API_KEY=
PDL_BASE_URL=https://api.peopledatalabs.com
PDL_RATE_LIMIT_MS=250

OTHER_FREE_ENRICHMENT_ENABLED=false
PUBLIC_LOOKUP_BASE_URL=https://autocomplete.clearbit.com/v1/companies/suggest
